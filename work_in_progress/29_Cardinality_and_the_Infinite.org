#+Title: Logic and Proof
#+Author: [[http://www.andrew.cmu.edu/user/avigad][Jeremy Avigad]], [[http://www.andrew.cmu.edu/user/rlewis1/][Robert Y. Lewis]],  [[http://www.contrib.andrew.cmu.edu/~fpv/][Floris van Doorn]]

* Cardinality
:PROPERTIES:
  :CUSTOM_ID: Cardinality
:END:

Mathematicians -- and people using mathematics -- are often concerned
about measuring /size/ or /quantity/. Most readers of these notes will
have learned to count many years ago; indeed, the tools in this chapter
for comparing and measuring /finite/ systems will seem familiar. When
these tools are extended to /infinite/ systems, though, some strange
and counterintuitive results appear.

In this chapter, we will mostly work informally in the language of set
theory. The definitions and arguments here can be translated to formal
systems, though.
# , and we will see a few examples in Lean.
# will we?

** Finite Sets and Equinumerosity

The notion of /size/ in set theory is very closely connected to the
notion of a /bijection/, defined in Section 8.2 [LINK]. Recall that
a function $f : A \to B$ is said to be a /bijection/ if it is both injective
and surjective; intuitively, every element of $A$ corresponds to exactly
one element of $B$, and vice versa. There is a bijection between the set
{1, 2, 3, 4} and the set of Beatles {John, Paul, George, Ringo}, and
we can picture this bijection by writing one set above the other and
connecting the elements in pairs.

#+ATTR_LATEX: :width 300bp
 [[./card_diagram_1.png]]

We made the claim in section 8.2 that, in some sense, this bijection "means"
that there are four Beatles. Why does it mean this? In effect, the
bijection (suppose it's called $f$) allows us to count the Beatles.
$f(1)$ is the first, $f(2)$ is the second, and so on. Since $f$ is
a surjection, each Beatle will be counted at least once, and since $f$ is an
injection, the same Beatle will never be counted twice.

Using this idea, it is easy to define what it means for a set to have
exactly $n$ elements.

--------
*Definition.* Let $n$ be a natural number. A set $A$ has exactly $n$ elements
if there is a bijection between $\{1, 2, 3, \ldots, n\}$ and $A$.
--------

We also say that the cardinality of $A$ is $n$. The word
/cardinality/ is (roughly) a synonym for size. In general, we denote the
cardinality of $A$ by writing $|A|$.

If two sets $A$ and $B$ both have cardinality $n$, they certainly have
the same cardinality. In this case, we say that $A$ and $B$ are
/equinumerous/. In fact -- forseeing that we will soon extend these
notions to infinite sets -- we will give a slightly more precise definition
of equinumerosity.

--------
*Definition.* Two sets $A$ and $B$ are said to be /equinumerous/ if there
is a bijection between them. Equivalently, we say $A$ and $B$ have the same
cardinality.
--------

Using this terminology, we could restate our earlier definition: a set has
cardinality $n$ if it is equinumerous with $\{1, 2, 3, \ldots, n\}$.

--------
*Definition.* For two sets $A$ and $B$, we say the cardinality of $A$ is
less than or equal to the cardinality of $B$ -- that is, $|A| \le |B|$ --
when there is an injection $f : A \to B$.
--------

Recall, from our earlier discussion of injections and surjections, that
this implies $|A| \le |B|$ if and only if there is a surjection $f : B \to A$.
If $|A| \le |B|$ and $|B| \le |A|$, there are injections in both directions,
and by the Cantor-Bernstein theorem, we can find a bijection. In this case,
$|A| = |B|$. We leave it as an exercise to confirm that this relation on
cardinalities is a weak order!

We finish this section with one final definition.

--------
*Definition.* A set $A$ is /finite/ if there is some natural number $n$ such
that $A$ has cardinality $n$.
--------

This definition may seem obvious. But,
as always, it is important for us to be absolutely precise. Infinite sets
can behave in strange and unexpected ways; we want to be sure that this
strangeness isn't due to vague definitions!

** Infinite Sets

One reason that the notion of "infinity" can be confusing, perhaps, is that the
 word "infinite" is used casually in many different ways. Sometimes, "infinite"
is used to mean "limitless" or "unbounded" -- picture the real number line
extending without end in either direction. But there are infinitely many real
numbers between 0 and 1, which is certainly not an "unbounded" region as we usually
think of it. Another
definition, proposed by the mathematician Richard Dedekind, may be of interest
after the previous section. Dedekind says that a set
$A$ is infinite if there is a proper subset $B \subset A$ (that is, there is
at least one element $x \in A$ with $x\notin B$) such that $B$ and $A$ are
equinumerous. Try to draw a picture of what this situation might look like!

The definition we will adopt here may again seem almost trivial, but be assured
this is not the case. (In fact, in most circumstances, it is equivalent to
Dedekind's definition.)

--------
*Definition.* A set $A$ is /infinite/ if it is not finite.
--------

/Infinite/ is simply the negation of /finite/. Using our knowledge of first-order
logic, we can turn this definition into an equivalent (positive) statement: a set
$A$ is /infinite/ if, for each natural number $n$, there is no bijection between
$A$ and the set $\{1, 2, 3, \ldots, n\}$. Essentially, "infinite" means that for
every $n$, counting to $n$ will still miss something in the set.

There is an obvious "first candidate" for infinity: the set of natural numbers
$\NN$. Convince yourself that, by the definition here, $\NN$ is infinite. (What
would it mean if there were a bijection from $\{1, 2, 3, \ldots, n\}$ to $\NN$?)
Luckily, all of the other sets we would "hope" are infinite -- the rational
numbers, points in the Euclidean plane, and so on -- do, indeed, fit this definition.

Since natural numbers are used in the definition of "finite," the set $\NN$ has
a kind of special status. In a sense, it is the simplest kind of infinite set we
can create. We use a special term to describe its size.

--------
*Definition.* A set $A$ is /countably infinite/ (or sometimes just /countable/)
if $A$ is equinumerous with $\NN$. Equivalently, we say that $A$ has cardinality
$\aleph_0$ (read "aleph-nought"). If $A$ is not countable, we say it is /uncountable/.
--------

(Note that, since the identity map $id(x) = x$ is a bijection on any set, every
set is equinumerous with itself, and thus $\NN$ itself is countably infinite.)

The term "countably infinite" is meant to be evocative. Suppose $A$ is a countable
set. By definition, there is a bijection $f : \NN \to A$. $A$ has a "first"
element, $f(0)$; a "second" element, $f(1)$; a "third" element, $f(2)$; and so
on. This in itself is not overly exciting. But, since $f$ is a bijection, we can
say something more: /every/ element of $A$ will be the $n$th element, for some
unique $n$. That is, for any element of $A$, one must only count finitely high
to "reach" that element.

We can represent this in a diagram as follows.

#+ATTR_LATEX: :width 300bp
 [[./card_diagram_2.png]]

With this definition in mind, one might find it hard to resist asking the following
question: which of our favorite sets are countable? Is the set of integers $\ZZ$
countable? How about the rationals $\QQ$, or the reals $\RR$? What is the logical
form of the statement "a set $A$ is not countable," and how might we prove such
a statement? Reflect on these questions before reading on!

-----------

We've argued that the set of natural numbers $\NN$ is countable: there are obvious
"first," "second," and "third" elements, and so on. For the set of integers $\ZZ$,
the choice is not as obvious. For any integer $z$ we might choose as the "first,"
there are infinitely many greater integers and infinitely many lesser integers.
In which direction should we count?

This may seem puzzling, until we realize a key fact: to show $\ZZ$ is countable,
nothing requires us to count the integers "in order." That is, the first element
could be less than the third, which could be less than the second, etc. It was
only a nice coincidence that we counted $\NN$ "in order." With a bit of thought,
we can find the following bijection between $\NN$ and $\ZZ$:

#+ATTR_LATEX: :width 400bp
 [[./card_diagram_3.png]]

From this bijection, we see that $\ZZ$ is, in fact, countably infinite.

The natural numbers and the integers are both "discrete." That is, when we draw
a number line, there is "space" between each integer; for every integer, there
are unique integers to its left and its right. We used this property in order to
come up with our enumeration.

Since this property is not true of the rational numbers, we might hypothesize that
$\QQ$ is uncountable. Remarkably, this hypothesis is false: we can find a
bijection between $\NN$ and $\QQ$. Doing so with full mathematical rigor takes a
bit of work, so we will first see the general idea, and then indicate how to
make it more precise.

Consider the rational numbers laid out in a table as follows:

# | 1/1 | 1/2 | 1/3 | 1/4 | 1/5 | ... |
# | 2/1 | 2/2 | 2/3 | 2/4 | 2/5 | ... |
# | 3/1 | 3/2 | 3/3 | 3/4 | 3/5 | ... |
# | 4/1 | 4/2 | 4/3 | 4/4 | 4/5 | ... |
# | 5/1 | 5/2 | 5/3 | 5/4 | 5/5 | ... |
# | ... | ... | ... | ... | ... |     |

#+ATTR_LATEX: :width 350bp
 [[./card_diagram_4.png]]

It should be easy to convince yourself that this table contains every positive rational
number. (The number $p / q$ occurs in the $p$ th row and $q$ th column.) In fact,
this table contains many copies of every rational number: the number $1$ appears
as $1/1$, $2/2$, $3/3$, and so on. But this shouldn't matter -- if we can count
every entry in this table, then we can "skip over" entries that have already
been counted, and count each positive rational exactly once.

# | 1/1 ↓ | 1/2 →   | 1/3 ↓ | 1/4 → | 1/5 ↓ | ... |
# | 2/1 → | 2/2 ↑   | 2/3 ↓ | 2/4 ↑ | 2/5 ↓ | ... |
# | 3/1 ↓ | 3/2 ←   | 3/3 ← | 3/4 ↑ | 3/5 ↓ | ... |
# | 4/1 →  | 4/2 →   | 4/3 → | 4/4 ↑ | 4/5 ↓ | ... |
# | 5/1 ↓ | 5/2 ←   | 5/3 ← | 5/4 ← | 5/5 ← | ... |
# | ... | ...   | ... | ... | ... |     |

#+ATTR_LATEX: :width 350bp
 [[./card_diagram_5.png]]

Once we've agreed that the positive rationals are countable, it is easy to extend
our argument to the full set of rationals, using the same alternating trick we
used with $\ZZ$.

In the case of the integers, it was reasonably easy to come up with a formula
$f(n)$ that told us exactly which integer corresponded to which natural number.
Because of the "double-counting" problem, there's no obvious way to come up
with a similar formula here. Notice, though, that the double-counting problem
disappears if we consider /ordered pairs/ of natural numbers instead of fractions.
That is, instead of writing $2/3$ in the table, we write the pair $(2, 3)$.
The pair $(2, 2)$ is different from the pair $(3, 3)$, and thus we don't have to
worry about counting the same fraction twice. Next, notice that the positive
rational numbers correspond to a /subset/ of the set of ordered pairs of naturals:
specifically, the rational number $p / q$ (in lowest terms) corresponds to the
pair $(p, q)$. This correspondence is an /injection/: every positive rational has
a unique ordered pair, but not every ordered pair has a corresponding rational.

The fact that the rational numbers are countable can, admittedly, be counterintuitive.
There is an obvious question to ask next: the rationals seem a lot like the reals, so is
the set $\RR$ countable? If it were, where else could we possibly look for an uncountable
set?

It turns out that $\RR$ is /not/ countable. Again, a fully rigorous proof takes a bit of
caution, so we will skip over some subtle details here.

Recall that every real number $r$ has a decimal expansion; if
$0 < r < 1$, we can write $r = 0.r_1 r_2 r_3 r_4 \ldots$, where each $r_i$ is a digit in
$\{0, 1, \ldots, 9\}$. A bit more formally, we have a decomposition
$r = \sum_{i = 1}^\infty \frac{r_i}{10^i}$ for each $r \in \RR$ with $0 < r < 1$.

Suppose that $\RR$ were countable. In that case, the real numbers strictly between 0 and 1
must be countable as well. As before, we can put them in their "counting order," this time
written vertically instead of horizontally. (Note that we use superscripts, $r^i$, to
denote the $i$ th number in the list. The superscripts do not mean the "$i$ th power.")

1. $r^1 = r^1_1 r^1_2 r^1_3 r^1_4 \ldots$
2. $r^2 = r^2_1 r^2_2 r^2_3 r^2_4 \ldots$
3. $r^3 = r^3_1 r^3_2 r^3_3 r^3_4 \ldots$
4. $r^4 = r^4_1 r^4_2 r^4_3 r^4_4 \ldots$
...

By assumption, /every/ real number between 0 and 1 must appear somewhere in this list.
We will find a contradiction by producing a number $s$ between 0 and 1 that does not
appear. For each $i$, we will fix $s_i$, the $i$ th digit of the decimal expansion of $s$,
to be equal to $9 - r^i_i$. Since each $r^i_i$ is also a decimal digit, $9 - r^i_i$ cannot
be equal to $r_i^i$ for any $i$. Therefore $s$ cannot be equal to $r_i$ for any $i$, since
if they were equal their $i$th digits would need to match. So $s$ does not appear in our
enumeration, and $\RR$ is not countable.

This remarkable proof, due to Cantor, is known as a "diagonalization argument." Proofs
using this technique appear often in logic and computability theory; it is a powerful
method for proving uncountability.

In summary, we have seen a "hierarchy" of sizes of sets. Sets can be:

- finite, in which case, sets with fewer elements have lower cardinality
- countably infinite, having cardinality equal to $|\NN| = \aleph_0$
- uncountably infinite.

In fact, there is a huge hierarchy of uncountably infinite sets as well. An uncountable
set that has a bijection with $\RR$ is said to have cardinality $\mathfrak{c}$. A set that
has a surjection, but no injection, into $\RR$ has cardinality greater than $\mathfrak{c}$.
Set theorists are still today investigating the structure within this hierarchy.
